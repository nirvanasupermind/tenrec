var tenrec=new function(){var t=this&&this.__extends||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n]);function e(){this.constructor=t}t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)};function e(t){return Math.trunc(parseFloat(t))}function o(t){this.pos=e(t)}function s(){}function r(t){s.call(this),this.text=""+t}function n(t,r){s.call(this),this.parser=t,this.parser2=r}function i(t){s.call(this),this.chars=""+t}function u(t){s.call(this),this.parser=t}function a(t,r){s.call(this),this.parser1=t,this.parser2=r}function h(t){s.call(this),this.f=t}function p(t,r,n){s.call(this),this.parser=t,this.min=e(r),this.max=e(n)}function l(t){p.call(this,t,0,1/0)}function f(t){n.call(this,d(""),t)}function c(t){w.call(this,new a(t,tenrec.ws),t=>t[0])}function w(t,r){s.call(this),this.parser=t,this.f=r}function d(t){return new r(t=""+t)}function y(t){return new i(t=""+t)}function g(t){return new l(t)}function m(t,r){return new w(t,r)}function v(t){return new f(t)}Array.prototype.failed=function(){return!!this[1]},o.prototype.offset=function(t){return new o(this.pos+t)},s.prototype.parse=function(){throw"Unimplemented"},t(r,s),r.prototype.parse=function(t){if((t=""+t)===this.text)return[t,null];for(var r=0;r<this.text.length&&t.charAt(r)===this.text.charAt(r);)r++;return[null,new o(r)]},t(n,s),n.prototype.parse=function(t){var[r,n]=this.parser.parse(t=""+t);return n?this.parser2.parse(t):[r,n]},t(i,s),i.prototype.parse=function(t){return 0===(t=""+t).length?[null,new o(0)]:2<=t.length?[null,new o(1)]:this.chars.split("").includes(t)?[t,null]:[null,new o(0)]},t(u,s),u.prototype.parse=function(t){var[,r]=this.parser.parse(t=""+t);if(r)return[t,null];for(var n=0;n<t.length&&this.parser.parse(t.substring(0,n)).failed();)n++;return[null,new o(n-1)]},t(a,s),a.prototype.parse=function(t){t=""+t;for(var r=0;r<t.length&&this.parser1.parse(t.substring(0,r)).failed();)r++;var n=t.substring(0,r),e=t.substring(r),[s,n]=this.parser1.parse(n);if(n)return[null,n];var[n,e]=this.parser2.parse(e);return e?[null,e.offset(r)]:this.parser1 instanceof a&&!this.parser1._noconcat&&Array.isArray(s)?[s.concat(n),null]:[[s,n],null]},t(h,s),h.prototype.parse=function(t){return t=""+t,this.f().parse(t)},t(p,s),p.prototype.parse=function(t){if(t=""+t,this.min<=0&&""===t)return[[],null];for(var r=[],n=0;n<t.length&&this.parser.parse(t.substring(n)).failed();)n++;for(var e=0,s=!1,i=0;;){if(r.length>this.max)return[null,new o(e)];for(var u=n,n=0;n<u&&this.parser.parse(t.substring(n,u)).failed();)n++;e+=n;var a=t.substring(n,u);if(""===a){for(i=0;i<t.length&&this.parser.parse(t.substring(i)).failed();)i++;a=t.substring(i),s=!0}a=this.parser.parse(a);if(a.failed())return 0===e?a:[null,a[1].offset(e-1)];if(r.push(a[0]),!0===s)break}return r.length>this.max||r.length<this.min?[null,new o(i)]:[r,null]},t(l,p),t(f,n),t(c,w),c.prototype.parse=function(t){return new w(this.parser,this.f).parse(t)},t(w,s),w.prototype.parse=function(t){t=this.parser.parse(t=""+t);return t.failed()?t:[this.f(t[0]),null]},this.digit=y("0123456789"),this.lowerCase=y("abcdefghijklmnopqrstuvwxyz"),this.upperCase=y("ABCDEFGHIJKLMNOPQRSTUVWXYZ"),this.letter=y("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"),this.alphaNumeric=y("0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"),this.ws=m(g(y(" \t\n\v\f\r")),t=>t.join("")),this.optWs=v(this.ws),this.text=d,this.either=function(...t){return t.reduce((t,r)=>new n(t,r))},this.charSet=y,this.not=function(t){return new u(t)},this.seq=function(...t){return Object.assign(t.reduce((t,r)=>new a(t,r)),{_noconcat:!0})},this.repeat=function(t,r,n=null){return new p(t,r,n=null===n?r:n)},this.many=g,this.delay=function(t){return new h(t)},this.transform=m,this.opt=v,this.spaced=function(t){return new c(t)}};"object"==typeof module&&module.exports?module.exports=tenrec:"function"==typeof define&&define.amd&&define([],function(){return tenrec});